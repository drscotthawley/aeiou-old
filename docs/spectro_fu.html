---

title: spectro-fu


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/spectro_fu.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/spectro_fu.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>Preprocesses a dataset of audio and turns it into spectrograms. Assumes pre-chunking e.g. via <a href="/shazbot/chunkadelic.html"><code>chunkadelic</code></a></p>
</blockquote>
<p>This is pretty much a simplified duplicate of <a href="/shazbot/chunkadelic.html"><code>chunkadelic</code></a></p>
<p>Note:Duplicates the directory structure(s) referenced by input paths.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="stf_up" class="doc_header"><code>stf_up</code><a href="https://github.com/drscotthawley/shazbot/tree/master/shazbot/spectro_fu.py#L21" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>stf_up</code>(<strong><code>audio</code></strong>:<code>_VariableFunctionsClass.tensor</code>, <strong><code>new_filename</code></strong>:<code>str</code>)</p>
</blockquote>
<p>coverts audio to stft image and saves it</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>audio</code></strong></td>
<td><code>_VariableFunctionsClass.tensor</code></td>
<td></td>
<td>long audio file to be chunked</td>
</tr>
<tr>
<td><strong><code>new_filename</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>stem of new filename(s) to be output as spectrogram images</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="process_one_file" class="doc_header"><code>process_one_file</code><a href="https://github.com/drscotthawley/shazbot/tree/master/shazbot/spectro_fu.py#L32" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>process_one_file</code>(<strong><code>filenames</code></strong>:<code>list</code>, <strong><code>args</code></strong>, <strong><code>file_ind</code></strong>)</p>
</blockquote>
<p>this turns one audio file into a spectrogram.  left channel only for now</p>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>filenames</code></strong></td>
<td><code>list</code></td>
<td></td>
<td>list of filenames from which we'll pick one</td>
</tr>
<tr>
<td><strong><code>args</code></strong></td>
<td></td>
<td></td>
<td>output of argparse</td>
</tr>
<tr>
<td><strong><code>file_ind</code></strong></td>
<td></td>
<td></td>
<td>index from filenames list to read from</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="main" class="doc_header"><code>main</code><a href="https://github.com/drscotthawley/shazbot/tree/master/shazbot/spectro_fu.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>main</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>usage: spectro-fu [-h] output_path input_paths [input_paths ...]

positional arguments:
  output_path           Path of output for spectrogram-ified data
  input_paths           Path(s) of a file or a folder of files. (recursive)

options:
  -h, --help            show this help message and exit
  --sr SR               Audio sample rate to use (default: 48000)
  --workers             Maximum number of workers to use (default: all)</code></pre>

</div>
</div>
</div>
</div>


